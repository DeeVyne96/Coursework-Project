<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LearnHub - After School Classes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --warning: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fb;
            color: #333;
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
        }
        
        .lesson-card {
            transition: all 0.3s ease;
            border: none;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            height: 100%;
        }
        
        .lesson-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.1);
        }
        
        .subject-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }
        
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--warning);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .cart-item {
            border-left: 4px solid var(--primary);
            transition: all 0.2s ease;
        }
        
        .cart-item:hover {
            border-left-color: var(--warning);
        }
        
        .spaces-low {
            color: var(--warning);
            font-weight: 600;
        }
        
        .spaces-none {
            color: #dc3545;
            font-weight: 600;
        }
        
        .search-box {
            border-radius: 50px;
            padding: 12px 20px;
            border: 2px solid #e9ecef;
            transition: all 0.3s;
        }
        
        .search-box:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.2rem rgba(67, 97, 238, 0.25);
        }
        
        .sort-select {
            border-radius: 50px;
            padding: 12px 20px;
        }
        
        .btn-primary {
            background-color: var(--primary);
            border-color: var(--primary);
            border-radius: 50px;
            padding: 10px 20px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            background-color: var(--secondary);
            border-color: var(--secondary);
            transform: translateY(-2px);
        }
        
        .hero-section {
            background: linear-gradient(135deg, var(--primary) 0%, var(--success) 100%);
            color: white;
            border-radius: 0 0 30px 30px;
            padding: 3rem 0;
            margin-bottom: 2rem;
        }
        
        .price-tag {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .cart-summary {
            background: linear-gradient(135deg, #f5f7fb 0%, #e4e8f0 100%);
            border-radius: 15px;
            padding: 1.5rem;
        }
        
        .view-toggle {
            position: relative;
            overflow: hidden;
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: #6c757d;
        }
        
        .empty-state i {
            font-size: 4rem;
            margin-bottom: 1rem;
            color: #dee2e6;
        }
        
        @media (max-width: 768px) {
            .hero-section {
                border-radius: 0 0 20px 20px;
                padding: 2rem 0;
            }
            
            .lesson-card {
                margin-bottom: 1rem;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark sticky-top" style="background-color: var(--primary);">
            <div class="container">
                <a class="navbar-brand" href="#">
                    <i class="fas fa-graduation-cap me-2"></i>LearnHub
                </a>
                
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <button class="btn btn-outline-light position-relative" @click="toggleView">
                                <i class="fas" :class="showCart ? 'fa-book' : 'fa-shopping-cart'"></i>
                                {{ showCart ? 'Back to Classes' : 'My Cart' }}
                                <span v-if="cartTotal > 0" class="cart-badge">{{ cartTotal }}</span>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <div class="hero-section" v-if="!showCart">
            <div class="container text-center">
                <h1 class="display-5 fw-bold">Discover Amazing After-School Classes</h1>
                <p class="lead">Boost your skills with our expert-led courses. Limited spaces available!</p>
            </div>
        </div>

        <!-- Main Content -->
        <div class="container my-4">
            <!-- Lessons View -->
            <div v-if="!showCart">
                <!-- Search and Sort Controls -->
                <div class="row mb-4">
                    <div class="col-md-8 mb-3 mb-md-0">
                        <div class="input-group">
                            <span class="input-group-text bg-white border-end-0">
                                <i class="fas fa-search text-muted"></i>
                            </span>
                            <input 
                                type="text" 
                                class="form-control search-box border-start-0" 
                                placeholder="Search by subject, location, price..." 
                                v-model="searchQuery" 
                                @input="handleSearch">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="d-flex">
                            <select class="form-select sort-select me-2" v-model="sortBy">
                                <option value="subject">Sort by Subject</option>
                                <option value="location">Sort by Location</option>
                                <option value="price">Sort by Price</option>
                                <option value="spaces">Sort by Availability</option>
                            </select>
                            <button class="btn btn-outline-primary" @click="toggleSortOrder" :title="sortAsc ? 'Ascending' : 'Descending'">
                                <i class="fas" :class="sortAsc ? 'fa-sort-alpha-down' : 'fa-sort-alpha-down-alt'"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Lessons Grid -->
                <div v-if="filteredLessons.length > 0">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4" v-for="lesson in filteredLessons" :key="lesson.id">
                            <div class="card lesson-card">
                                <div class="card-body p-4">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <div>
                                            <i class="subject-icon" :class="getSubjectIcon(lesson.subject)" :style="{color: getSubjectColor(lesson.subject)}"></i>
                                            <h5 class="card-title fw-bold">{{ lesson.subject }}</h5>
                                        </div>
                                        <span class="price-tag">£{{ lesson.price }}</span>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <p class="card-text mb-1">
                                            <i class="fas fa-map-marker-alt text-muted me-2"></i> 
                                            <strong>{{ lesson.location }}</strong>
                                        </p>
                                        <p class="card-text">
                                            <i class="fas fa-users text-muted me-2"></i> 
                                            <span :class="{'spaces-none': lesson.spaces === 0, 'spaces-low': lesson.spaces > 0 && lesson.spaces < 3}">
                                                {{ lesson.spaces }} {{ lesson.spaces === 1 ? 'space' : 'spaces' }} left
                                            </span>
                                        </p>
                                    </div>
                                    
                                    <button 
                                        class="btn w-100 mt-2" 
                                        :class="lesson.spaces > 0 ? 'btn-primary' : 'btn-secondary'" 
                                        @click="addToCart(lesson)"
                                        :disabled="lesson.spaces === 0">
                                        <i class="fas fa-cart-plus me-2"></i>
                                        {{ lesson.spaces > 0 ? 'Add to Cart' : 'Fully Booked' }}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Empty State for Lessons -->
                <div v-else class="empty-state">
                    <i class="fas fa-search"></i>
                    <h3>No classes found</h3>
                    <p>Try adjusting your search criteria</p>
                </div>
            </div>

            <!-- Cart View -->
            <div v-else>
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="fw-bold">My Shopping Cart</h2>
                    <span class="badge bg-primary fs-6">{{ cartTotal }} {{ cartTotal === 1 ? 'item' : 'items' }}</span>
                </div>
                
                <div class="row">
                    <!-- Cart Items -->
                    <div class="col-lg-8">
                        <div v-if="cart.length > 0">
                            <div class="card mb-3 cart-item" v-for="(item, index) in cart" :key="index">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="d-flex align-items-center">
                                            <i class="subject-icon me-3" :class="getSubjectIcon(item.subject)" :style="{color: getSubjectColor(item.subject)}"></i>
                                            <div>
                                                <h5 class="mb-1">{{ item.subject }}</h5>
                                                <p class="mb-1 text-muted">
                                                    <i class="fas fa-map-marker-alt me-1"></i> {{ item.location }}
                                                </p>
                                                <p class="mb-0 fw-bold text-primary">£{{ item.price }}</p>
                                            </div>
                                        </div>
                                        <button class="btn btn-outline-danger btn-sm" @click="removeFromCart(index)">
                                            <i class="fas fa-trash"></i> Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Empty Cart State -->
                        <div v-else class="empty-state">
                            <i class="fas fa-shopping-cart"></i>
                            <h3>Your cart is empty</h3>
                            <p>Add some classes to get started!</p>
                            <button class="btn btn-primary mt-3" @click="toggleView">
                                <i class="fas fa-book me-2"></i> Browse Classes
                            </button>
                        </div>
                    </div>
                    
                    <!-- Checkout Section -->
                    <div class="col-lg-4">
                        <div class="cart-summary sticky-top" style="top: 100px;">
                            <h4 class="fw-bold mb-3">Checkout</h4>
                            
                            <div v-if="cart.length > 0">
                                <div class="mb-3">
                                    <label for="name" class="form-label fw-semibold">Full Name</label>
                                    <input 
                                        type="text" 
                                        class="form-control" 
                                        id="name"
                                        v-model="checkout.name" 
                                        @input="validateForm"
                                        placeholder="Enter your full name">
                                    <div class="text-danger small mt-1" v-if="!isValidName && checkout.name">
                                        Name must contain only letters and spaces
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="phone" class="form-label fw-semibold">Phone Number</label>
                                    <input 
                                        type="text" 
                                        class="form-control" 
                                        id="phone"
                                        v-model="checkout.phone" 
                                        @input="validateForm"
                                        placeholder="Enter your phone number">
                                    <div class="text-danger small mt-1" v-if="!isValidPhone && checkout.phone">
                                        Phone must contain only numbers
                                    </div>
                                </div>
                                
                                <div class="d-flex justify-content-between mb-3">
                                    <span class="fw-semibold">Total:</span>
                                    <span class="price-tag">£{{ cartTotalPrice }}</span>
                                </div>
                                
                                <button 
                                    type="button" 
                                    class="btn btn-success w-100 py-2 fw-bold" 
                                    @click="submitOrder"
                                    :disabled="!canCheckout">
                                    <i class="fas fa-credit-card me-2"></i> Complete Booking
                                </button>
                                
                                <p class="text-muted small mt-2 text-center">
                                    You'll receive a confirmation email shortly
                                </p>
                            </div>
                            
                            <div v-else class="text-center text-muted">
                                <p>Add classes to your cart to checkout</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="bg-dark text-light py-4 mt-5">
            <div class="container text-center">
                <p class="mb-0">&copy; 2023 LearnHub After School Classes. All rights reserved.</p>
            </div>
        </footer>

        <!-- Order Confirmation Modal -->
        <div class="modal fade" id="orderModal" tabindex="-1" ref="orderModal">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header border-0">
                        <h5 class="modal-title fw-bold">Booking Confirmed!</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body text-center py-4">
                        <i class="fas fa-check-circle text-success mb-3" style="font-size: 3rem;"></i>
                        <h4 class="fw-bold mb-3">Thank you, {{ checkout.name }}!</h4>
                        <p class="mb-3">Your booking has been successfully submitted.</p>
                        <p class="mb-0">We'll contact you at <strong>{{ checkout.phone }}</strong> to confirm class details.</p>
                    </div>
                    <div class="modal-footer border-0 justify-content-center">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Continue Browsing</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    // Sample data - will be replaced with API data
                    lessons: [
                        { id: 1, subject: 'Math', location: 'London Central', price: 30, spaces: 5 },
                        { id: 2, subject: 'Science', location: 'Manchester', price: 35, spaces: 5 },
                        { id: 3, subject: 'Art', location: 'Birmingham', price: 25, spaces: 5 },
                        { id: 4, subject: 'Music', location: 'Liverpool', price: 40, spaces: 5 },
                        { id: 5, subject: 'Dance', location: 'Leeds', price: 28, spaces: 5 },
                        { id: 6, subject: 'Sports', location: 'Glasgow', price: 20, spaces: 5 },
                        { id: 7, subject: 'Coding', location: 'Bristol', price: 45, spaces: 5 },
                        { id: 8, subject: 'Language', location: 'Cardiff', price: 32, spaces: 5 },
                        { id: 9, subject: 'Drama', location: 'Edinburgh', price: 27, spaces: 5 },
                        { id: 10, subject: 'Cooking', location: 'Belfast', price: 38, spaces: 5 }
                    ],
                    cart: [],
                    showCart: false,
                    searchQuery: '',
                    sortBy: 'subject',
                    sortAsc: true,
                    checkout: {
                        name: '',
                        phone: ''
                    },
                    isValidName: true,
                    isValidPhone: true
                };
            },
            computed: {
                filteredLessons() {
                    let filtered = [...this.lessons];
                    
                    // Apply search filter
                    if (this.searchQuery) {
                        const query = this.searchQuery.toLowerCase();
                        filtered = filtered.filter(lesson => 
                            lesson.subject.toLowerCase().includes(query) ||
                            lesson.location.toLowerCase().includes(query) ||
                            lesson.price.toString().includes(query) ||
                            lesson.spaces.toString().includes(query)
                        );
                    }
                    
                    // Apply sorting
                    filtered.sort((a, b) => {
                        let aVal = a[this.sortBy];
                        let bVal = b[this.sortBy];
                        
                        if (typeof aVal === 'string') {
                            aVal = aVal.toLowerCase();
                            bVal = bVal.toLowerCase();
                        }
                        
                        if (aVal < bVal) return this.sortAsc ? -1 : 1;
                        if (aVal > bVal) return this.sortAsc ? 1 : -1;
                        return 0;
                    });
                    
                    return filtered;
                },
                cartTotal() {
                    return this.cart.length;
                },
                cartTotalPrice() {
                    return this.cart.reduce((total, item) => total + item.price, 0);
                },
                canCheckout() {
                    return this.cart.length > 0 && 
                           this.isValidName && 
                           this.isValidPhone && 
                           this.checkout.name && 
                           this.checkout.phone;
                }
            },
            methods: {
                getSubjectIcon(subject) {
                    const icons = {
                        'Math': 'fa-calculator',
                        'Science': 'fa-flask',
                        'Art': 'fa-palette',
                        'Music': 'fa-music',
                        'Dance': 'fa-child',
                        'Sports': 'fa-football-ball',
                        'Coding': 'fa-code',
                        'Language': 'fa-language',
                        'Drama': 'fa-theater-masks',
                        'Cooking': 'fa-utensils'
                    };
                    return icons[subject] || 'fa-book';
                },
                getSubjectColor(subject) {
                    const colors = {
                        'Math': '#4361ee',
                        'Science': '#4cc9f0',
                        'Art': '#f72585',
                        'Music': '#7209b7',
                        'Dance': '#3a0ca3',
                        'Sports': '#f77f00',
                        'Coding': '#2ec4b6',
                        'Language': '#e71d36',
                        'Drama': '#ff9f1c',
                        'Cooking': '#6a040f'
                    };
                    return colors[subject] || '#4361ee';
                },
                addToCart(lesson) {
                    if (lesson.spaces > 0) {
                        this.cart.push({
                            ...lesson,
                            cartId: Date.now() + Math.random()
                        });
                        lesson.spaces--;
                    }
                },
                removeFromCart(index) {
                    const removedItem = this.cart.splice(index, 1)[0];
                    const lesson = this.lessons.find(l => l.id === removedItem.id);
                    if (lesson) {
                        lesson.spaces++;
                    }
                },
                toggleView() {
                    this.showCart = !this.showCart;
                },
                toggleSortOrder() {
                    this.sortAsc = !this.sortAsc;
                },
                handleSearch() {
                    // In a real app, this would call the backend API
                    // For now, we're using client-side filtering
                    console.log("Searching for:", this.searchQuery);
                },
                validateForm() {
                    // Name validation: letters and spaces only
                    this.isValidName = /^[A-Za-z\s]+$/.test(this.checkout.name);
                    
                    // Phone validation: numbers only
                    this.isValidPhone = /^\d+$/.test(this.checkout.phone);
                },
                submitOrder() {
                    if (!this.canCheckout) return;
                    
                    // Show confirmation modal
                    const modal = new bootstrap.Modal(this.$refs.orderModal);
                    modal.show();
                    
                    // In a real app, here we would:
                    // 1. Send order to backend API
                    // 2. Update lesson spaces via API
                    // 3. Handle response
                    
                    // Reset cart and form after successful order
                    this.cart = [];
                    this.checkout.name = '';
                    this.checkout.phone = '';
                    this.showCart = false;
                }
            },
            mounted() {
                // In a real app, we would fetch lessons from the API here
                console.log("App mounted - ready to fetch data from API");
            }
        }).mount('#app');
    </script>
</body>
</html>